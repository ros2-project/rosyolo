# ROS2 기반 YOLO 객체 인식 주행 로봇 (팀 프로젝트)

본 저장소에는 2025년 10월까지 진행된 프로젝트 코드가 포함되어 있습니다.  
이후 12월까지 개발이 진행되었으나, 로컬 환경 문제로 인해 해당 기간의 일부 코드가 보존되지 못했습니다.

현재 저장소의 코드는 프로젝트의 구현 구조를 증빙하기 위한 용도로 업로드되었습니다.

---

## 🛠 장치의 실제 모습
![장치의 실제 모습](https://github.com/user-attachments/assets/23de3e27-be3f-4750-bc5a-7c7080b22390)

---

## 📌 개요
본 프로젝트는 라즈베리파이에서 YOLO 기반 객체 인식을 수행하고,  
ROS2를 통해 STM32 제어 노드와 통신하여 로봇 주행을 제어하는 시스템입니다.

---

## ⚙️ 기능
1. **공 인식**
   - 카메라를 통해 공을 인식한다.

2. **접근 제어**
   - 인식된 공과의 거리에 따라 이동 속도를 조절하며 공을 향해 이동한다.
   - 이동 중 공이 화면 프레임에서 벗어날 경우 직진 주행을 유지하며 공이 다시 화면 중앙에 위치하도록 방향을 보정한다.
   
3. **감속 단계**
   - 공과의 거리가 사전 정의된 임계값 이내로 가까워지면 충돌을 방지하기 위해 이동 속도를 감소시
     킨다.
   
4. **수거 동작**
   - 수거부를 작동하여 공을 수거한다.

5. **탐색 단계**
   - 제자리 회전을 수행하며 주변 환경을 스캔하고 새로운 공을 탐색한다.
   
6. **반복 수행**
   - 새로운 공이 인식되면 1단계부터 동일한 과정을 반복한다.

---

## ⚠️ 보존되지 못한 기능
아래 기능들은 실제 구현 및 실험을 진행하였으나  
로컬 코드 유실로 인해 현재 저장소에는 포함되어 있지 않습니다.
시연영상에서 아래 기능들이 실현된 것을 확인할 수 있습니다.

1. 공과의 거리에 따른 속도 제어
2. 탁구공 / 테니스공 구분 및 객체별 속도 제어
3. 공 수거 후 추가적인 공 탐색을 위한 제자리 회전 기능
4. 수거 범위 진입 시 서보모터를 통한 공 수거 기능

---

## 👥 역할
**이승우**
- ROS 시스템 개발
- YOLO 모델 학습
- STM32 시스템 개발

**현진석**
- ROS 시스템 개발
- YOLO 모델 학습
- Fusion 360 기반 장치 프레임 제작

---

## ⏱ 프로젝트 기간
- **2025.08 ~ 2025.12 (약 4.5개월)**

---

## 🧠 시스템 구조
- **Raspberry Pi**
  - ROS2 (Humble)
    - vision_node: 공을 인식하고 좌표와 크기를 토픽 발행
    - twist_node: 좌표와 크기를 바탕으로 장치의 속도 및 수거 토픽 발행
    - hw_node: STM32로 제어 명령 전달
  - YOLOv5

- **STM32**
  - DC 모터 기반 주행 제어
  - 서보 모터 기반 수거 장치 제어

- **통신**
  - ROS2 Topic
  - UART

---

## 🧠 시스템 구조도
![System Architecture](https://github.com/user-attachments/assets/e2ee0421-8399-4743-a35b-e1aa8a19054d)

---

## 🎥 시연 영상
- 공 접근 후 수거 및 공 탐색  
  https://www.youtube.com/shorts/lOB72pwqEA8

- 이동하는 공 추적  
  https://www.youtube.com/shorts/7vudDRStdXo
